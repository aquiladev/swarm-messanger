{"version":3,"sources":["images/logo.svg","api/index.js","api/chats.js","base/error/actions.js","account/actions.js","app/actions.js","app/reducer.js","account/reducer.js","base/default.js","settings/actions.js","settings/reducer.js","messenger/contacts/reducer.js","messenger/chats/reducer.js","base/subscription/reducer.js","base/error/reducer.js","base/reducer.js","base/middlewares/localStorage.js","base/RxWebSocketSubject.js","base/client.js","base/redux.js","base/components/Identicon.jsx","account/components/AccountMenu.jsx","messenger/components/ControlPanelButton.jsx","base/components/Header.jsx","base/error/components/Error.jsx","base/containers/ConnectionController.jsx","base/containers/Layout.jsx","base/pages/Home.jsx","settings/pages/Settings.jsx","base/components/Key.jsx","account/pages/Profile.jsx","messenger/contacts/components/ContactInvite.jsx","messenger/contacts/components/ContactListGroup.jsx","messenger/contacts/components/ContactRequest.jsx","messenger/contacts/components/ContactList.jsx","messenger/chats/components/ChatList.jsx","messenger/components/ControlPanel.jsx","messenger/components/LeftSide.jsx","messenger/components/Layout.jsx","messenger/contacts/pages/Contact.jsx","messenger/chats/components/ChatDayDivider.jsx","messenger/chats/components/ChatMessage.jsx","messenger/chats/pages/Chat.jsx","base/containers/Startup.jsx","App.jsx","serviceWorker.js","index.js","base/key.js","messenger/contacts/actions.js","messenger/chats/actions.js","base/fn.js"],"names":["module","exports","__webpack_require__","p","registry","Object","_home_circleci_repo_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","chatRegistry","run","store","window","addEventListener","event","data","type","console","error","handleMessage","log","_home_circleci_repo_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","_ref","publicKey","dispatch","chat","getState","chats","find","x","key","push","concat","inviteContact","ERROR_CATCHED","ERROR_DISMISS","addError","asyncToGenerator","regenerator_default","a","mark","_callee","wrap","_context","prev","next","stop","_x","apply","this","arguments","ACCOUNT_REQUEST","ACCOUNT_RECEIVE","ACCOUNT_MUTATE","updateUsername","username","_ref4","_callee2","_context2","account","_x4","APP_CONNECTING","APP_CONNECTED","APP_DISCONNECTED","initialState","isStarted","isConnected","raw","reduce","state","length","undefined","assign","isLoading","overlayAddress","action","objectSpread","DEFAULT_SETTINGS","pss","bzz","revealAddress","SETTINGS_MUTATE","size","mode","home","settings","CONTACTS_RESTORE","CONTACT_REQUEST","CONTACT_RECEIVE","CONTACT_MUTATE","CONTACT_ACCEPT","CONTACT_DECLINE","contacts","CHATS_RESTORE","toConsumableArray","CHAT_CREATE","CHAT_SEND_MESSAGE","CHAT_RECEIVE_MESSAGE","map","messages","sum","message","CHAT_SUBSCRIBE","CONTACT_SUBSCRIBE","sub","filter","reducer","history","combineReducers","router","connectRouter","app","subscriptions","errors","LocalStorageMiddleware","classCallCheck","trackFields","excludeActionTypes","_this","get","path","parts","split","value","index","part","hasOwnProperty","call","storeState","_state$settings","model","unpack","jsonpack","pack","compressed","LZString","compress","localStorage","setItem","prevState","nextState","includes","abrupt","some","v","preloadedState","getItem","rest","objectWithoutProperties","uncompressed","decompress","RxWebSocketSubject","url","reconnectInterval","resultSelector","serializer","possibleConstructorReturn","getPrototypeOf","defaultResultSelector","e","JSON","parse","defaultSerializer","stringify","connectionStatus","Observable","observer","connectionObserver","pipe","share","distinctUntilChanged","wsSubjectConfig","closeObserver","socket","openObserver","connect","subscribe","reconnectionObservable","reconnect","_this2","WebSocketSubject","m","_","_this3","interval","takeWhile","complete","Subject","ClientResolver","config","ws","subject","client","SwarmClient","rpc","StreamRPC","createHashHistory","withStyles","icon","overflow","borderRadius","classes","style","react_default","createElement","className","width","height","dist_main_default","seed","scale","Math","ceil","AccountMenu","anchorEl","handleMenu","setState","currentTarget","handleClose","_this$props","props","open","Boolean","react_router","to","Fragment","IconButton","aria-owns","aria-haspopup","onClick","color","components_Identicon","Menu","id","anchorOrigin","vertical","horizontal","transformOrigin","onClose","MenuItem","menu","ListItemIcon","AccountCircle","ListItemText","primary","Typography","noWrap","esm_Settings","Component","compose","maxWidth","location","hash","edge","aria-label","routerActions","goBack","Close","esm_Menu","theme","grow","flexGrow","title","lineHeight","logo","marginRight","spacing","display","float","isNarrow","AppBar","Toolbar","components_ControlPanelButton","variant","ButtonBase","textDecoration","src","alt","components_AccountMenu","Error","fixed","i","SnackbarContent","dismiss","Close_default","_ref2","_x2","dismissError","position","top","left","right","zIndex","transform","backgroundColor","palette","dark","ConnectionController","isOpen","nextProps","setTimeout","children","pathname","success","green","withRouter","layout","paddingTop","containers_ConnectionController","CssBaseline","components_Header","components_Error","logoContainer","textAlign","paddingBottom","apps","paddingLeft","paddingRight","appIcon","fontSize","Button","Message","Settings","reset","_ref3","save","_Object$assign","updateSettings","Grid","container","justify","item","md","sm","xs","info","href","target","sectionTitle","Paper","square","section","TextField","onChange","defaultValue","divider","Divider","pretty","select","packageJson","version","actionBar","button","marginTop","padding","amber","Key","tooltipOpen","copied","toggle","bind","assertThisInitialized","name","label","substr","FormControl","margin","InputLabel","htmlFor","Input","disabled","input","endAdornment","InputAdornment","react_copy_to_clipboard_lib","text","onCopy","Tooltip","placement","FileCopy","&:before","borderBottomStyle","Profile","components_Key","ContactInvite","invite","_this$state","address","t0","modal","onKeyPress","Add","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","autoFocus","fullWidth","DialogActions","ContactListGroup","list","renderItem","items","defaultProps","c","ContactRequest","accept","acceptContact","decline","_this$props2","declineContact","ContactList","groupBy","values","components_ContactInvite","components_ContactListGroup","components_ContactRequest","contact","contactTitle","ChatList","chatTitle","ControlPanel","handleChange","Tabs","indicatorColor","textColor","Tab","Contacts","esm_Chat","components_ChatList","components_ContactList","root","components_ControlPanel","cell","components_LeftSide","Contact","components_Layout","match","params","borderBottom","background","default","date","toLocaleDateString","ChatMessage","download","isOwn","startsWith","file","fileName","body","ownedBody","header","sender","showHeader","time","Date","timestamp","toLocaleTimeString","react","renderMessageContent","identicon","content","_this$props3","block","owned","renderMessage","marginBottom","marginLeft","Chat","send","sendMessage","msg","upload","files","sendFile","scrollToBottom","scroller","scrollTo","duration","delay","smooth","containerId","curTime","prevTime","getDay","curMsg","prevMsg","participants","defineProperty","keys","forEach","k","getParticipants","sort","b","modules","scrollContainer","lg","xl","showDayDivider","isSameDay","components_ChatDayDivider","components_ChatMessage","showMsgHeader","elevation","InputBase","placeholder","fileLabel","iconButton","component","Description","Send","flex","opacity","cursor","bottom","Startup","resolve","connection","_resolve","_getState","session","Promise","all","getPublicKey","baseAddr","sent","slicedToArray","restoreContacts","restoreChats","_x3","err","React","useTheme","useMediaQuery","breakpoints","up","containers_Startup","lib_default","titleTemplate","containers_Layout","exact","Home","render","pages_Contact","pages_Chat","hostname","urlParams","URLSearchParams","search","reduxCompose","localStorageMiddleware","deriveInitialState","clientResolver","middleware","routerMiddleware","thunk","withExtraArgument","enhancers","applyMiddleware","createStore","configureStore","toLowerCase","ReactDOM","react_hot_loader","lib","es","esm","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","apiRun","PUBLIC_KEY_RE","isValidPubKey","existing","test","decodePssEvent","toObject","createSubscription","_callee7","topic","subscription","_context7","stringToTopic","createTopicSubscription","payload","handler","_contact","overlay_address","createChat","_callee3","_getState3","_context3","_getState2","_x5","_x6","_x7","_x8","_callee4","_getState4","publicKeyHex","_resolve2","_ref5","_ref6","contactTopic","sharedTopic","pssMessage","_context4","hexValueType","keyUtils","random","toString","slice","setPeerPublicKey","getAddress","utc_timestamp","now","sendAsym","_x9","_x10","_x11","sendResponse","_callee8","_getState7","_context8","_ref7","_callee5","_getState5","_resolve3","_context5","_x17","_x18","_x19","_ref8","_callee6","_getState6","_resolve4","_context6","_x20","_x21","_x22","getChat","_ref9","_home_circleci_repo_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","_home_circleci_repo_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","_home_circleci_repo_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","isRead","subscribeAll","_participants","_home_circleci_repo_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_1__","_callee9","_context9","_x16","readEvent","buffer","readFile","result","uploadFile","contentType","__","FileSaver","blob","t1","saveAs","_x23","_x24","d","__webpack_exports__","rv","fr","FileReader","onload","readAsArrayBuffer","reveal","substring"],"mappings":"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","file":"static/js/main.e96f41a0.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.1584bb37.svg\";","import { registry as chatRegistry } from './chats';\nexport * from './contacts';\n\nconst registry = { ...chatRegistry };\n\nfunction handleMessage(store, data) {\n  if (!data && !data.type) {\n    console.error('Nebula::Message is invalid');\n    return;\n  }\n\n  if (!registry[data.type]) {\n    console.error('Nebula::Handler not found');\n    return;\n  }\n\n  return registry[data.type](store, data);\n}\n\nexport function run(store) {\n  window.addEventListener('message', function (event) {\n    return handleMessage(store, event.data);\n  }, false);\n\n  console.log('Nebula::APIs started');\n}","import { push } from 'connected-react-router';\n\nimport { inviteContact } from './../messenger/contacts/actions';\n\nexport const CHAT_OPEN = '@NEBULA::CHAT_OPEN';\n\nfunction open(store, { publicKey }) {\n  const { dispatch, getState } = store;\n  const state = getState();\n\n  const chat = state.chats.find(x => x.key === publicKey);\n  if (chat) {\n    dispatch(push(`/messenger/chat/${chat.key}`));\n    return;\n  }\n\n  dispatch(inviteContact(publicKey));\n}\n\nexport const registry = {\n  [CHAT_OPEN]: open\n};","export const ERROR_CATCHED = 'ERROR_CATCHED';\nexport const ERROR_DISMISS = 'ERROR_DISMISS';\n\nexport function addError(error) {\n  return async (dispatch) => {\n    dispatch({ type: ERROR_CATCHED, error });\n  };\n}\n\nexport function dismissError(error) {\n  return async (dispatch) => {\n    dispatch({ type: ERROR_DISMISS, error });\n  };\n}","import { restoreContacts } from './../messenger/contacts/actions';\nimport { restoreChats } from './../messenger/chats/actions';\nimport { addError } from './../base/error/actions';\n\nexport const ACCOUNT_REQUEST = 'ACCOUNT_REQUEST';\nexport const ACCOUNT_RECEIVE = 'ACCOUNT_RECEIVE';\nexport const ACCOUNT_MUTATE = 'ACCOUNT_MUTATE';\n\nexport function fetchAccount() {\n  return async (dispatch, getState, resolve) => {\n    dispatch({ type: ACCOUNT_REQUEST });\n\n    try {\n      const { client } = resolve();\n      const [publicKey, overlayAddress] =\n        await Promise.all([\n          client.pss.getPublicKey(),\n          client.pss.baseAddr(),\n        ]);\n\n      const { app } = getState();\n      const session = app[publicKey] || {};\n      dispatch(receiveAccount({ publicKey, overlayAddress, username: session.username }));\n\n      dispatch(restoreContacts(publicKey));\n      dispatch(restoreChats(publicKey));\n    } catch (error) {\n      dispatch(addError(error.message));\n    }\n  };\n}\n\nfunction receiveAccount(account) {\n  return {\n    type: ACCOUNT_RECEIVE,\n    account\n  };\n}\n\nexport function updateUsername(username) {\n  return async (dispatch) => {\n    dispatch({\n      type: ACCOUNT_MUTATE,\n      account: { username }\n    });\n  };\n}","import { fetchAccount } from './../account/actions';\nimport { addError } from './../base/error/actions';\n\nexport const APP_CONNECTING = 'APP_CONNECTING';\nexport const APP_CONNECTED = 'APP_CONNECTED';\nexport const APP_DISCONNECTED = 'APP_DISCONNECTED';\n\nexport function connect() {\n  return async (dispatch, _, resolve) => {\n    dispatch({ type: APP_CONNECTING });\n\n    const { connection } = resolve();\n    connection.subscribe(\n      (isConnected) => {\n        if (isConnected) {\n          dispatch({ type: APP_CONNECTED });\n          dispatch(fetchAccount());\n        } else {\n          dispatch({ type: APP_DISCONNECTED });\n        }\n      },\n      (err) => {\n        dispatch(addError(err.message));\n      }\n    );\n  };\n}","import {\n  APP_CONNECTED,\n  APP_DISCONNECTED\n} from './actions';\n\nexport const initialState = {\n  isStarted: false,\n  isConnected: false,\n  raw: ''\n};\n\nexport default function reduce(state = initialState, action) {\n  switch (action.type) {\n    case APP_CONNECTED: {\n      return Object.assign({}, state, {\n        isStarted: true,\n        isConnected: true\n      });\n    }\n    case APP_DISCONNECTED: {\n      return Object.assign({}, state, {\n        isStarted: true,\n        isConnected: false\n      });\n    }\n    default:\n      return state;\n  }\n}","import {\n  ACCOUNT_REQUEST,\n  ACCOUNT_RECEIVE,\n  ACCOUNT_MUTATE\n} from './actions';\n\nexport const initialState = {\n  isLoading: false,\n  publicKey: '',\n  overlayAddress: '',\n  username: ''\n};\n\nexport default function reduce(state = initialState, action) {\n  switch (action.type) {\n    case ACCOUNT_REQUEST: {\n      return Object.assign({}, state, {\n        isLoading: true\n      });\n    }\n    case ACCOUNT_RECEIVE: {\n      return Object.assign({}, state, {\n        isLoading: false,\n        ...action.account\n      });\n    }\n    case ACCOUNT_MUTATE: {\n      return Object.assign({}, state, {\n        ...action.account\n      });\n    }\n    default:\n      return state;\n  }\n}","export const DEFAULT_SETTINGS = {\n  pss: 'ws://127.0.0.1:8546',\n  bzz: 'http://127.0.0.1:8500',\n  revealAddress: 4\n}","import { DEFAULT_SETTINGS } from '../base/default';\n\nexport const SETTINGS_MUTATE = 'SETTINGS_MUTATE';\n\nexport function updateSettings({ pss, bzz, revealAddress }) {\n  return async (dispatch) => {\n    dispatch({\n      type: SETTINGS_MUTATE,\n      settings: { pss, bzz, revealAddress }\n    });\n  };\n}\n\nexport function resetSettings() {\n  return async (dispatch) => {\n    dispatch({\n      type: SETTINGS_MUTATE,\n      settings: {\n        pss: DEFAULT_SETTINGS.pss,\n        bzz: DEFAULT_SETTINGS.bzz,\n        revealAddress: DEFAULT_SETTINGS.revealAddress\n      }\n    });\n  };\n}","import {\n  SETTINGS_MUTATE\n} from './actions';\n\nexport const initialState = {\n  bzz: '',\n  pss: '',\n  revealAddress: 0,\n  size: 0,\n  mode: 'full',\n  home: '/'\n};\n\nexport default function reduce(state = initialState, action) {\n  switch (action.type) {\n    case SETTINGS_MUTATE: {\n      return Object.assign({}, state, {\n        ...action.settings\n      });\n    }\n    default:\n      return state;\n  }\n}","import {\n  CONTACTS_RESTORE,\n  CONTACT_REQUEST,\n  CONTACT_RECEIVE,\n  CONTACT_MUTATE,\n  CONTACT_ACCEPT,\n  CONTACT_DECLINE\n} from './actions';\n\nexport const initialState = {};\n\nexport default function reduce(state = initialState, action) {\n  switch (action.type) {\n    case CONTACTS_RESTORE:\n    case CONTACT_REQUEST:\n    case CONTACT_RECEIVE:\n    case CONTACT_MUTATE:\n    case CONTACT_ACCEPT:\n    case CONTACT_DECLINE: {\n      return Object.assign({}, state, {\n        ...action.contacts\n      });\n    }\n    default:\n      return state;\n  }\n}","import sum from 'hash-sum';\n\nimport {\n  CHATS_RESTORE,\n  CHAT_CREATE,\n  CHAT_SEND_MESSAGE,\n  CHAT_RECEIVE_MESSAGE\n} from './actions';\n\nexport const initialState = [];\n\nexport default function reduce(state = initialState, action) {\n  switch (action.type) {\n    case CHATS_RESTORE: {\n      return Object.assign([], state, [\n        ...action.chats\n      ]);\n    }\n    case CHAT_CREATE: {\n      return [...state, action.chat];\n    }\n    case CHAT_SEND_MESSAGE:\n    case CHAT_RECEIVE_MESSAGE: {\n      return state.map((chat) => {\n        if (chat.key !== action.key) {\n          return chat\n        }\n\n        chat.messages[sum(action.message)] = action.message;\n        return { ...chat };\n      })\n    }\n    default:\n      return state;\n  }\n}","import { CONTACT_SUBSCRIBE } from './../../messenger/contacts/actions';\nimport { CHAT_SUBSCRIBE } from './../../messenger/chats/actions';\n\nexport const initialState = [];\n\nexport default function reduce(state = initialState, action) {\n  switch (action.type) {\n    case CHAT_SUBSCRIBE:\n    case CONTACT_SUBSCRIBE: {\n      return [...state, action.sub];\n    }\n    default:\n      return state;\n  }\n}","import {\n  ERROR_CATCHED,\n  ERROR_DISMISS\n} from './actions';\n\nexport const initialState = [];\n\nexport default function reduce(state = initialState, action) {\n  switch (action.type) {\n    case ERROR_CATCHED: {\n      return [...state, action.error];\n    }\n    case ERROR_DISMISS: {\n      return state.filter((error) => error !== action.error);\n    }\n    default:\n      return state;\n  }\n}","import { combineReducers } from 'redux';\nimport { connectRouter } from 'connected-react-router';\n\nimport app from './../app/reducer';\nimport account from './../account/reducer';\nimport settings from './../settings/reducer';\nimport contacts from './../messenger/contacts/reducer';\nimport chats from './../messenger/chats/reducer';\nimport subscriptions from './../base/subscription/reducer';\nimport errors from './../base/error/reducer';\n\nexport default (history) => combineReducers({\n  router: connectRouter(history),\n  app,\n  account,\n  settings,\n  contacts,\n  chats,\n  subscriptions,\n  errors\n});","import jsonpack from 'jsonpack';\nimport LZString from 'lz-string';\n\nimport { DEFAULT_SETTINGS } from './../../base/default';\n\nexport default class LocalStorageMiddleware {\n  constructor(key) {\n    this.key = key;\n    this.trackFields = [\n      'account.username',\n      'settings.pss',\n      'settings.bzz',\n      'settings.revealAddress',\n      'contacts',\n      'chats'\n    ];\n    this.excludeActionTypes = [\n      'ACCOUNT_REQUEST',\n      'ACCOUNT_RECEIVE',\n      'CONTACTS_RESTORE',\n      'CONTACT_SUBSCRIBE',\n      'CHATS_RESTORE',\n      'CHAT_SUBSCRIBE',\n    ];\n  }\n\n  middleware() {\n    const get = (state, path) => {\n      const parts = path.split('.');\n      let value = state;\n\n      for (let index = 0; index < parts.length; index++) {\n        const part = parts[index];\n\n        if (Object.hasOwnProperty.call(value, part)) {\n          value = value[part];\n        } else {\n          return undefined;\n        }\n      }\n\n      return value;\n    };\n\n    const storeState = (state) => {\n      const { pss, bzz, revealAddress } = state.settings;\n\n      const model = {\n        ...this.unpack(state.app.raw),\n        ...{\n          pss,\n          bzz,\n          revealAddress\n        }\n      };\n\n      const publicKey = get(state, 'account.publicKey');\n      if (publicKey) {\n        const username = get(state, 'account.username');\n        model[publicKey] = {\n          username,\n          contacts: state.contacts,\n          chats: state.chats,\n        };\n      }\n\n      const value = jsonpack.pack(model);\n      const compressed = LZString.compress(value);\n      localStorage.setItem(this.key, compressed);\n    }\n\n    return (store) => (next) => async (action) => {\n      const prevState = store.getState();\n      await next(action);\n      if (!action.type || this.excludeActionTypes.includes(action.type)) {\n        return;\n      }\n\n      const nextState = store.getState();\n      const diff = this.trackFields.some(v => {\n        const prev = get(prevState, v);\n        const next = get(nextState, v);\n        return prev !== next;\n      })\n\n      if (diff) {\n        storeState(nextState);\n      }\n    }\n  }\n\n  deriveInitialState(preloadedState) {\n    const raw = localStorage.getItem(this.key);\n    const state = this.unpack(raw);\n\n    const { app, settings, ...rest } = preloadedState;\n    return {\n      app: { ...app, raw, ...state },\n      settings: {\n        ...settings,\n        pss: state.pss || DEFAULT_SETTINGS.pss,\n        bzz: state.bzz || DEFAULT_SETTINGS.bzz,\n        revealAddress: state.revealAddress === undefined ? DEFAULT_SETTINGS.revealAddress : state.revealAddress,\n        size: (raw || '').length,\n      },\n      ...rest\n    };\n  }\n\n  unpack(raw) {\n    const uncompressed = LZString.decompress(raw);\n    return uncompressed ? jsonpack.unpack(uncompressed) : {};\n  }\n}","import { Subject, Observable, interval } from 'rxjs';\nimport { WebSocketSubject } from 'rxjs/webSocket';\nimport { distinctUntilChanged, share, takeWhile } from 'rxjs/operators';\n\nexport default class RxWebSocketSubject extends Subject {\n  constructor(\n    url,\n    reconnectInterval = 5000, /// pause between connection\n    resultSelector,\n    serializer) {\n\n    super();\n    this.url = url;\n    this.reconnectInterval = reconnectInterval;\n    this.resultSelector = resultSelector;\n    this.serializer = serializer;\n\n    /// by default, when a message is received from the server, trying to decode it as JSON\n    this.defaultResultSelector = (e) => {\n      return JSON.parse(e.data);\n    };\n\n    /// when sending a message, encode it to JSON\n    this.defaultSerializer = (data) => {\n      return JSON.stringify(data);\n    };\n\n    /// connection status\n    this.connectionStatus = new Observable((observer) => {\n      this.connectionObserver = observer;\n    }).pipe(share())\n      .pipe(distinctUntilChanged());\n\n    if (!resultSelector) {\n      this.resultSelector = this.defaultResultSelector;\n    }\n\n    if (!this.serializer) {\n      this.serializer = this.defaultSerializer;\n    }\n\n    /// config for WebSocketSubject\n    /// except the url, here is closeObserver and openObserver to update connection status\n    this.wsSubjectConfig = {\n      url: url,\n      closeObserver: {\n        next: (e) => {\n          this.socket = null;\n          this.connectionObserver.next(false);\n        }\n      },\n      openObserver: {\n        next: (e) => {\n          this.connectionObserver.next(true);\n        }\n      }\n    };\n\n    this.connect();\n\n    /// follow the connection status and run the reconnect while losing the connection\n    this.connectionStatus.subscribe((isConnected) => {\n      if (!this.reconnectionObservable && typeof (isConnected) == \"boolean\" && !isConnected) {\n        this.reconnect();\n      }\n    });\n  }\n\n  connect() {\n    this.socket = new WebSocketSubject(this.wsSubjectConfig);\n    this.socket.subscribe((m) => {\n      this.next(m); /// when receiving a message, we just send it to our Subject\n    }, (_) => {\n      if (!this.socket) {\n        /// in case of an error with a loss of connection, we restore it\n        this.reconnect();\n      }\n    });\n  }\n\n  /// WebSocket Reconnect handling\n  reconnect() {\n    this.reconnectionObservable = interval(this.reconnectInterval)\n      .pipe(takeWhile(() => {\n        return !this.socket;\n      }));\n\n    this.reconnectionObservable.subscribe(() => {\n      this.connect();\n    }, null, () => {\n      /// if the reconnection attempts are failed, then we call complete of our Subject and status\n      this.reconnectionObservable = null;\n      if (!this.socket) {\n        this.complete();\n        this.connectionObserver.complete();\n      }\n    });\n  }\n\n  /// sending the message\n  send(data) {\n    this.socket.next(this.serializer(data));\n  }\n}\n","import { SwarmClient } from '@erebos/swarm-browser';\nimport StreamRPC from '@mainframe/rpc-stream';\n\nimport RxWebSocketSubject from './RxWebSocketSubject';\n\nexport default class ClientResolver {\n  constructor(config) {\n    const { bzz, ws } = config;\n\n    this.subject = new RxWebSocketSubject(ws);\n    this.client = new SwarmClient({\n      bzz,\n      rpc: new StreamRPC(this.subject.socket)\n    });\n\n    const _this = this;\n    this.subject.connectionStatus.subscribe(\n      (isConnected) => {\n        if (!isConnected) {\n          return;\n        }\n\n        _this.client = new SwarmClient({\n          bzz,\n          rpc: new StreamRPC(_this.subject.socket)\n        });\n      }\n    );\n  }\n}","import { applyMiddleware, createStore, compose as reduxCompose } from 'redux';\nimport thunk from 'redux-thunk';\nimport { createHashHistory } from 'history';\nimport { routerMiddleware } from 'connected-react-router';\n\nimport reducer from './reducer';\nimport LocalStorageMiddleware from './middlewares/localStorage';\nimport { DEFAULT_SETTINGS } from './default';\nimport ClientResolver from './client';\n\nexport const history = createHashHistory();\n\nexport function configureStore(initialState) {\n  // Use compose function provided by Redux DevTools if the extension is installed.\n  const compose = (process.env.NODE_ENV === 'development'\n    && typeof window === 'object'\n    && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__)\n    || reduxCompose;\n\n  const localStorageMiddleware = new LocalStorageMiddleware('nebula');\n  initialState = localStorageMiddleware.deriveInitialState(initialState);\n\n  const config = {\n    bzz: initialState.app.bzz || DEFAULT_SETTINGS.bzz,\n    ws: initialState.app.pss || DEFAULT_SETTINGS.pss,\n  };\n  const clientResolver = new ClientResolver(config);\n\n  const middleware = [\n    routerMiddleware(history),\n    localStorageMiddleware.middleware(),\n    thunk.withExtraArgument(() => {\n      return {\n        client: clientResolver.client,\n        connection: clientResolver.subject.connectionStatus\n      }\n    })\n  ];\n  const enhancers = [applyMiddleware(...middleware)];\n  const store = createStore(reducer(history), initialState, compose(...enhancers));\n\n  // Hot-reloading\n  if (module.hot && process.env.NODE_ENV === 'development') {\n    module.hot.accept('./reducer', () => {\n      store.replaceReducer(require('./reducer').default);\n    });\n  }\n\n  return store;\n}","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Blockies from 'react-blockies';\n\nconst styles = {\n  icon: {\n    overflow: 'hidden',\n    borderRadius: '50%'\n  }\n};\n\nfunction Identicon({ classes, publicKey, size, style }) {\n  return (\n    <div className={classes.icon} style={{ width: size, height: size, ...style }}>\n      <Blockies seed={publicKey} size={8} scale={Math.ceil(size / 8)} />\n    </div>\n  )\n}\n\nIdenticon.propTypes = {\n  classes: PropTypes.object.isRequired,\n  publicKey: PropTypes.string.isRequired,\n  size: PropTypes.number.isRequired,\n  style: PropTypes.object\n};\n\nexport default withStyles(styles)(Identicon)","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Menu from '@material-ui/core/Menu';\nimport Typography from '@material-ui/core/Typography';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { AccountCircle, Settings } from '@material-ui/icons';\nimport { push } from 'connected-react-router';\n\nimport Identicon from '../../base/components/Identicon';\n\nconst styles = _ => ({\n  menu: {\n    maxWidth: 300,\n  },\n});\n\nclass AccountMenu extends Component {\n  state = {\n    anchorEl: null,\n  };\n\n  handleMenu = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handleClose = () => {\n    this.setState({ anchorEl: null });\n  };\n\n  render() {\n    const { classes, dispatch, account, errors } = this.props;\n    const { anchorEl } = this.state;\n    const open = Boolean(anchorEl);\n\n    if (errors.length) {\n      return <Redirect to={'/settings'} />;\n    }\n\n    const { publicKey, username } = account;\n    if (!publicKey) return null;\n\n    return (\n      <>\n        <IconButton\n          aria-owns={open ? 'menu-account' : undefined}\n          aria-haspopup='true'\n          onClick={this.handleMenu}\n          color='inherit'\n        >\n          <Identicon publicKey={publicKey} size={32} />\n        </IconButton>\n        <Menu\n          id='menu-account'\n          anchorEl={anchorEl}\n          anchorOrigin={{\n            vertical: 'top',\n            horizontal: 'right',\n          }}\n          transformOrigin={{\n            vertical: 'top',\n            horizontal: 'right',\n          }}\n          open={open}\n          onClose={this.handleClose}\n        >\n          <MenuItem\n            className={classes.menu}\n            onClick={() => { dispatch(push('/profile')) }}>\n            <ListItemIcon>\n              <AccountCircle />\n            </ListItemIcon>\n            <ListItemText primary={\n              <Typography color='inherit' noWrap>\n                {username || publicKey}\n              </Typography>\n            } />\n          </MenuItem>\n          <MenuItem onClick={() => { dispatch(push('/settings')) }}>\n            <ListItemIcon>\n              <Settings />\n            </ListItemIcon>\n            <ListItemText primary={\n              <Typography color='inherit' noWrap>\n                Settings\n              </Typography>\n            } />\n          </MenuItem>\n        </Menu>\n      </>\n    );\n  }\n}\n\nAccountMenu.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  account: PropTypes.object,\n  errors: PropTypes.array\n};\n\nexport default compose(\n  connect((state) => {\n    const { account, errors } = state || {\n      account: {\n        publicKey: '',\n        username: ''\n      },\n      errors: []\n    };\n    return { account, errors };\n  }),\n  withStyles(styles)\n)(AccountMenu);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Menu, Close } from '@material-ui/icons';\nimport { routerActions } from 'connected-react-router';\nimport { push } from 'connected-react-router';\n\nconst path = '/messenger/control';\n\nfunction ControlPanelButton({ router, dispatch }) {\n  const { location } = router;\n\n  return (\n    <>\n      {location.hash === `#${path}` ?\n        <IconButton edge='start' color='inherit' aria-label='Close'\n          onClick={() => { dispatch(routerActions.goBack()) }}>\n          <Close />\n        </IconButton> :\n        <IconButton edge='start' color='inherit' aria-label='Control panel'\n          onClick={() => { dispatch(push(path)) }}>\n          <Menu />\n        </IconButton>\n      }\n    </>\n  );\n}\n\nControlPanelButton.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  router: PropTypes.object,\n};\n\nexport default compose(\n  connect((state) => {\n    const { router } = state || {\n      router: {\n        location: {}\n      }\n    };\n    return { router };\n  })\n)(ControlPanelButton);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport { push } from 'connected-react-router';\n\nimport AccountMenu from './../../account/components/AccountMenu';\nimport ControlPanelButton from './../../messenger/components/ControlPanelButton';\nimport logo from './../../images/logo.svg';\n\nconst styles = theme => ({\n  grow: {\n    flexGrow: 1,\n  },\n  title: {\n    color: 'inherit',\n    lineHeight: '2.4rem'\n  },\n  logo: {\n    width: 36,\n    marginRight: theme.spacing(2),\n    display: 'block',\n    float: 'left'\n  }\n});\n\nfunction Header({ classes, dispatch, isNarrow }) {\n  return (\n    <AppBar color='default'>\n      <Toolbar>\n        {isNarrow && <ControlPanelButton />}\n        <Typography variant='h5' color='inherit' noWrap className={classes.grow}>\n          <ButtonBase\n            className={classes.title}\n            style={{ textDecoration: 'none' }}\n            onClick={() => { dispatch(push('/')) }}>\n            <img src={logo} alt='Nebula' className={classes.logo} />\n            <Typography variant='h5' color='inherit' noWrap>Nebula</Typography>\n          </ButtonBase>\n        </Typography>\n        <AccountMenu />\n      </Toolbar>\n    </AppBar>\n  );\n}\n\nHeader.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  isNarrow: PropTypes.bool\n};\n\nexport default compose(\n  connect(),\n  withStyles(styles)\n)(Header);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { dismissError } from './../actions';\n\nconst styles = theme => ({\n  fixed: {\n    position: \"fixed\",\n    top: 0,\n    left: '50%',\n    right: 'auto',\n    zIndex: 1400,\n    transform: 'translateX(-50%)'\n  },\n  error: {\n    backgroundColor: theme.palette.error.dark\n  }\n});\n\nclass Error extends Component {\n  render() {\n    const { classes, errors } = this.props;\n\n    return (\n      <div className={classes.fixed}>\n        {\n          errors.map((error, i) =>\n            <SnackbarContent\n              key={i}\n              className={classes.error}\n              message={error}\n              action={[\n                <IconButton\n                  key=\"close\"\n                  aria-label=\"Close\"\n                  color=\"inherit\"\n                  onClick={() => this.dismiss(error)}\n                >\n                  <CloseIcon className={classes.icon} />\n                </IconButton>\n              ]} />\n          )\n        }\n      </div>\n    );\n  }\n\n  dismiss(error) {\n    this.props.dispatch(dismissError(error));\n  }\n}\n\nError.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  errors: PropTypes.array,\n};\n\nexport default compose(\n  connect((state) => {\n    const { errors } = state || [];\n    return { errors };\n  }),\n  withStyles(styles)\n)(Error);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withRouter, Redirect } from 'react-router';\nimport { withStyles } from '@material-ui/core/styles';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport green from '@material-ui/core/colors/green';\n\nconst styles = theme => ({\n  fixed: {\n    position: \"fixed\",\n    top: 6,\n    left: '50%',\n    right: 'auto',\n    zIndex: 1400,\n    transform: 'translateX(-50%)'\n  },\n  success: {\n    backgroundColor: green[600],\n  },\n  error: {\n    backgroundColor: theme.palette.error.dark,\n  }\n});\n\nclass ConnectionController extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpen: false\n    };\n  }\n\n  componentWillUpdate(nextProps) {\n    if (!this.props.isConnected && nextProps.isConnected && !this.state.isOpen) {\n      this.setState({ isOpen: true });\n      setTimeout(() => { this.setState({ isOpen: false }) }, 3000);\n    }\n  }\n\n  render() {\n    const { classes, isStarted, isConnected, children, location } = this.props;\n    const { pathname } = location;\n\n    if (isStarted && !isConnected && pathname !== '/settings') {\n      return <Redirect to={'/settings'} />;\n    }\n\n    return (\n      <>\n        <div className={classes.fixed}>\n          {this.state.isOpen && <SnackbarContent className={classes.success} message=\"Connected\" />}\n          {!isConnected && <SnackbarContent className={classes.error} message=\"No connection\" />}\n        </div>\n        {children}\n      </>\n    );\n  }\n}\n\nConnectionController.propTypes = {\n  classes: PropTypes.object.isRequired,\n  isConnected: PropTypes.bool,\n  isStarted: PropTypes.bool,\n  children: PropTypes.node\n};\n\nexport default compose(\n  connect((state) => {\n    const { app } = state || {\n      app: {\n        isConnected: false,\n        isStarted: false\n      }\n    };\n    return app;\n  }),\n  withStyles(styles)\n)(withRouter(ConnectionController));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nimport Header from './../components/Header';\nimport Error from './../error/components/Error';\nimport ConnectionController from './ConnectionController';\n\nconst styles = _ => ({\n  layout: {\n    height: '100%',\n    paddingTop: 64\n  }\n});\n\nfunction Layout({ classes, children, isNarrow }) {\n  return (\n    <ConnectionController>\n      <CssBaseline />\n      <Header isNarrow={isNarrow} />\n      <main className={classes.layout}>\n        {children}\n      </main>\n      <Error />\n    </ConnectionController>\n  );\n}\n\nLayout.propTypes = {\n  classes: PropTypes.object.isRequired,\n  children: PropTypes.node,\n  isNarrow: PropTypes.bool\n};\n\nexport default withStyles(styles)(Layout);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { Message } from '@material-ui/icons';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { push } from 'connected-react-router';\n\nimport logo from './../../images/logo.svg';\n\nconst styles = theme => ({\n  logoContainer: {\n    textAlign: 'center',\n    paddingTop: theme.spacing(10),\n    paddingBottom: theme.spacing(8),\n  },\n  logo: {\n    width: 200,\n    paddingBottom: theme.spacing(2),\n  },\n  title: {\n    color: '#e3e3e3'\n  },\n  apps: {\n    textAlign: 'center',\n    paddingTop: theme.spacing(6),\n    paddingBottom: theme.spacing(8),\n  },\n  app: {\n    width: 100,\n    textAlign: 'center',\n    paddingLeft: theme.spacing(8),\n    paddingRight: theme.spacing(8),\n  },\n  appIcon: {\n    fontSize: 100\n  }\n});\n\nfunction Home({ classes, dispatch }) {\n  return (\n    <>\n      <div className={classes.logoContainer}>\n        <img src={logo} alt='Nebula' className={classes.logo} />\n        <Typography variant='h1' className={classes.title}>Nebula</Typography>\n      </div>\n      <div className={classes.apps}>\n        <Button\n          className={classes.app}\n          onClick={() => { dispatch(push('/messenger')) }}>\n          <Typography>\n            <Message className={classes.appIcon} />\n            Messenger\n          </Typography>\n        </Button>\n      </div>\n    </>\n  );\n}\n\nHome.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func.isRequired\n};\n\nexport default compose(\n  connect(),\n  withStyles(styles)\n)(Home);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Divider from '@material-ui/core/Divider';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Button from '@material-ui/core/Button';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport amber from '@material-ui/core/colors/amber';\nimport pretty from 'prettysize';\n\nimport packageJson from '../../../package.json';\nimport { DEFAULT_SETTINGS } from '../../base/default';\nimport { updateSettings, resetSettings } from './../../settings/actions';\n\nconst styles = theme => ({\n  sectionTitle: {\n    marginTop: theme.spacing(2),\n  },\n  section: {\n    borderRadius: 5,\n    padding: theme.spacing(2)\n  },\n  divider: {\n    paddingTop: theme.spacing(2),\n    paddingBottom: theme.spacing(2)\n  },\n  actionBar: {\n    paddingTop: theme.spacing(2)\n  },\n  button: {\n    marginRight: theme.spacing(2),\n  },\n  info: {\n    backgroundColor: amber[300],\n    color: '#000',\n    maxWidth: '100%'\n  }\n});\n\nclass Settings extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {};\n  }\n\n  render() {\n    const { classes, settings, app } = this.props;\n    if (!settings.pss) {\n      return <div>No data</div>\n    }\n\n    return (\n      <Grid\n        container\n        spacing={0}\n        justify='center'\n        style={{ paddingTop: 10 }}\n      >\n        <Grid item md={6} sm={8} xs={11}>\n          {!app.isConnected && <SnackbarContent\n            className={classes.info}\n            message={\n              <div>There is no connection. Make sure you did everything right in order\n                to <a href='https://github.com/okamilab/nebula#running-nebula' target='_block'>run nebula</a></div>\n            } />}\n          <Typography variant='h5' color='inherit' noWrap className={classes.sectionTitle}>\n            Settings\n          </Typography>\n          <Typography variant='subtitle1' color='inherit' noWrap className={classes.sectionTitle}>\n            General\n          </Typography>\n          <Paper square className={classes.section}>\n            <Grid container spacing={0}>\n              <Grid item xs={6}>\n                <Typography variant='subtitle1' color='inherit' noWrap>\n                  PSS endpoint (WebSocket)\n                </Typography>\n              </Grid>\n              <Grid item xs={6}>\n                <TextField\n                  id='pss'\n                  onChange={(e) => this.setState({ pss: e.target.value })}\n                  defaultValue={settings.pss}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Typography variant='caption'>\n                  After updating the field you need to restart the app (refresh page)\n                </Typography>\n              </Grid>\n              <Grid item xs={12} className={classes.divider}>\n                <Divider />\n              </Grid>\n              <Grid item xs={6}>\n                <Typography variant='subtitle1' color='inherit' noWrap>\n                  BZZ endpoint\n                </Typography>\n              </Grid>\n              <Grid item xs={6}>\n                <TextField\n                  id='bzz'\n                  onChange={(e) => this.setState({ bzz: e.target.value })}\n                  defaultValue={settings.bzz}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Typography variant='caption'>\n                  After updating the field you need to restart the app (refresh page)\n                </Typography>\n              </Grid>\n              <Grid item xs={12} className={classes.divider}>\n                <Divider />\n              </Grid>\n              <Grid item xs={6}>\n                <Typography variant='subtitle1' color='inherit' noWrap>\n                  Local storage\n                </Typography>\n              </Grid>\n              <Grid item xs={6}>\n                {pretty(settings.size)}\n              </Grid>\n            </Grid>\n          </Paper>\n          <Typography variant='subtitle1' color='inherit' noWrap className={classes.sectionTitle}>\n            Security\n          </Typography>\n          <Paper square className={classes.section}>\n            <Grid container spacing={0}>\n              <Grid item xs={6}>\n                <Typography variant='subtitle1' color='inherit' noWrap>\n                  Reveal address partially\n                </Typography>\n              </Grid>\n              <Grid item xs={6}>\n                <TextField\n                  id='revealAddress'\n                  select\n                  onChange={(e) => this.setState({ revealAddress: +e.target.value })}\n                  value={this.state.revealAddress === undefined ? settings.revealAddress : this.state.revealAddress}\n                >\n                  <MenuItem value={0}>Broadcast</MenuItem>\n                  <MenuItem value={4}>4</MenuItem>\n                  <MenuItem value={8}>8</MenuItem>\n                  <MenuItem value={16}>16</MenuItem>\n                  <MenuItem value={32}>Full</MenuItem>\n                </TextField>\n              </Grid>\n            </Grid>\n          </Paper>\n          <Typography variant='subtitle1' color='inherit' noWrap className={classes.sectionTitle}>\n            About\n          </Typography>\n          <Paper square className={classes.section}>\n            <Grid container spacing={0}>\n              <Grid item xs={6}>\n                <Typography variant='subtitle1' color='inherit' noWrap>\n                  Version\n                </Typography>\n              </Grid>\n              <Grid item xs={6}>\n                <a href={`https://github.com/okamilab/nebula/releases/tag/v${packageJson.version}`} target='_block'>\n                  {packageJson.version}\n                </a>\n              </Grid>\n            </Grid>\n          </Paper>\n          <div className={classes.actionBar}>\n            <Button\n              variant='contained'\n              onClick={this.reset}\n              className={classes.button}>\n              Reset\n            </Button>\n            <Button\n              variant='contained'\n              color='primary'\n              onClick={this.save}\n              className={classes.button}>\n              Save\n            </Button>\n          </div>\n        </Grid>\n      </Grid>\n    )\n  }\n\n  reset = () => {\n    this.props.dispatch(resetSettings());\n  };\n\n  save = () => {\n    const { pss, bzz, revealAddress } =\n      Object.assign({}, this.props.settings, this.state);\n    this.props.dispatch(updateSettings({ pss, bzz, revealAddress }));\n  };\n}\n\nSettings.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  settings: PropTypes.object.isRequired,\n  app: PropTypes.object.isRequired\n};\n\nexport default compose(\n  connect((state) => {\n    const { settings, app } = state || {\n      settings: {\n        pss: DEFAULT_SETTINGS.pss,\n        bzz: DEFAULT_SETTINGS.bzz,\n        revealAddress: DEFAULT_SETTINGS.revealAddress,\n        size: 0\n      },\n      app: {\n        isConnected: false,\n      }\n    };\n    return { settings, app };\n  }),\n  withStyles(styles)\n)(Settings);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { withStyles } from '@material-ui/core/styles';\nimport FormControl from '@material-ui/core/FormControl';\nimport IconButton from '@material-ui/core/IconButton';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport InputAdornment from '@material-ui/core/InputAdornment';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { FileCopy } from '@material-ui/icons';\n\nconst styles = {\n  input: {\n    '&:before': {\n      borderBottomStyle: 'none!important'\n    }\n  }\n};\n\nclass Key extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      tooltipOpen: false,\n      copied: false\n    };\n\n    this.toggle = this.toggle.bind(this);\n  }\n\n  toggle() {\n    this.setState({\n      tooltipOpen: !this.state.tooltipOpen,\n      copied: this.state.tooltipOpen\n    });\n  }\n\n  render() {\n    const { name, value, label, classes } = this.props;\n\n    if (!value || !value.length) {\n      return null;\n    }\n\n    const display = value.length > 22 ?\n      `${value.substr(0, 16)}...${value.substr(value.length - 4)}` :\n      value;\n    return (\n      <FormControl margin=\"normal\">\n        <InputLabel htmlFor={`${name}_key`}>{label}</InputLabel>\n        <Input\n          id={`${name}_key`}\n          type=\"text\"\n          value={display}\n          disabled\n          className={classes.input}\n          endAdornment={\n            <InputAdornment position=\"end\">\n              <CopyToClipboard\n                id={`${name}_key`}\n                text={value}\n                onCopy={() => this.setState({ copied: true })}>\n                <Tooltip\n                  title={this.state.copied ? 'Copied' : 'Copy to clipboard'}\n                  placement=\"right\"\n                  onClose={() => {\n                    setTimeout(() => this.setState({ copied: false }), 200);\n                  }}>\n                  <IconButton>\n                    <FileCopy fontSize='small' />\n                  </IconButton>\n                </Tooltip>\n              </CopyToClipboard>\n            </InputAdornment>\n          }\n        />\n      </FormControl>\n    )\n  }\n}\n\nKey.propTypes = {\n  classes: PropTypes.object.isRequired,\n  name: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  label: PropTypes.string\n};\n\nexport default withStyles(styles)(Key);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\n\nimport Identicon from './../../base/components/Identicon';\nimport Key from './../../base/components/Key';\nimport { updateUsername } from './../actions';\n\nconst styles = theme => ({\n  sectionTitle: {\n    marginTop: theme.spacing(2),\n  },\n  section: {\n    borderRadius: 5,\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(2)\n  },\n  button: {\n    marginTop: theme.spacing(2)\n  }\n});\n\nclass Profile extends Component {\n  constructor(props) {\n    super(props)\n\n    this.state = {};\n  }\n\n  render() {\n    const { account, classes } = this.props;\n    if (!account) {\n      return <div>Loading</div>\n    }\n\n    const { username, publicKey, overlayAddress } = account;\n    if (!publicKey) {\n      return <div>No data</div>\n    }\n\n    return (\n      <Grid\n        container\n        spacing={0}\n        justify=\"center\"\n        style={{ paddingTop: 10 }}\n      >\n        <Grid item md={6} sm={8} xs={11}>\n          <Typography variant='h5' color='inherit' noWrap className={classes.sectionTitle}>\n            Profile\n          </Typography>\n          <Paper square className={classes.section}>\n            <Grid container spacing={0}>\n              <Grid item xs={3}>\n                {\n                  publicKey ?\n                    <Identicon publicKey={publicKey} size={78} /> :\n                    null\n                }\n              </Grid>\n              <Grid item xs={6}>\n                <TextField\n                  id=\"username\"\n                  label=\"User name\"\n                  onChange={(e) => this.setState({ username: e.target.value })}\n                  defaultValue={username}\n                />\n              </Grid>\n              <Grid item xs={3}>\n                <Button\n                  variant=\"contained\"\n                  color=\"primary\"\n                  onClick={this.save}\n                  className={classes.button}\n                  disabled={!this.state.username}>\n                  Save\n                </Button>\n              </Grid>\n              <Grid item xs={3}></Grid>\n              <Grid item xs={9}>\n                <Key\n                  name=\"publicKey\"\n                  value={publicKey}\n                  label=\"Public key\" />\n              </Grid>\n              <Grid item xs={3}></Grid>\n              <Grid item xs={9}>\n                <Key\n                  name=\"overlayAddress\"\n                  value={overlayAddress}\n                  label=\"Address\" />\n              </Grid>\n            </Grid>\n          </Paper>\n        </Grid>\n      </Grid>\n    );\n  }\n\n  save = async () => {\n    const { username } =\n      Object.assign({}, this.props, this.state);\n    await this.props.dispatch(updateUsername(username));\n  };\n}\n\nProfile.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  account: PropTypes.object,\n};\n\nexport default compose(\n  connect((state) => {\n    const { account } = state || {\n      account: {\n        publicKey: '',\n        username: ''\n      }\n    };\n    return { account };\n  }),\n  withStyles(styles)\n)(Profile);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Add } from '@material-ui/icons';\n\nimport { inviteContact } from './../actions';\n\nconst styles = theme => ({\n  error: {\n    backgroundColor: theme.palette.error.dark\n  }\n});\n\nclass ContactInvite extends Component {\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      modal: false,\n      publicKey: '',\n      address: '',\n      error: ''\n    };\n\n    this.toggle = this.toggle.bind(this);\n    this.onKeyPress = this.onKeyPress.bind(this);\n  }\n\n  toggle() {\n    this.setState({\n      error: null,\n      modal: !this.state.modal\n    });\n  }\n\n  onKeyPress(e) {\n    if (e.key === 'Enter' && this.state.publicKey) {\n      this.invite();\n    }\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { error } = this.state;\n\n    return (\n      <>\n        <IconButton color=\"inherit\" onClick={this.toggle}>\n          <Add />\n        </IconButton>\n        <Dialog\n          open={this.state.modal}\n          onClose={this.toggle}\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <DialogTitle id=\"form-dialog-title\">Invite contact</DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              {error ?\n                <SnackbarContent\n                  message={error.message || error}\n                  className={classes.error}></SnackbarContent>\n                : null}\n            </DialogContentText>\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              id=\"contactAddress\"\n              label=\"Contact public key *\"\n              type=\"text\"\n              fullWidth\n              onChange={(e) => this.setState({ publicKey: e.target.value })}\n              onKeyPress={this.onKeyPress}\n            />\n            <TextField\n              margin=\"dense\"\n              id=\"contactPublicKey\"\n              label=\"Contact address\"\n              type=\"text\"\n              fullWidth\n              onChange={(e) => this.setState({ address: e.target.value })}\n              onKeyPress={this.onKeyPress}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.toggle} color=\"default\">\n              Cancel\n            </Button>\n            <Button\n              onClick={this.invite}\n              disabled={!this.state.publicKey}\n              variant=\"contained\"\n              color=\"primary\">\n              Send request\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </>\n    );\n  }\n\n  invite = async () => {\n    try {\n      const { publicKey, address } = this.state\n      this.setState({ error: null });\n      await this.props.dispatch(inviteContact(publicKey, address));\n    } catch (error) {\n      this.setState({ error: error.message });\n      return;\n    }\n\n    this.toggle();\n  };\n}\n\nContactInvite.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default compose(\n  connect(),\n  withStyles(styles)\n)(ContactInvite);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Typography from '@material-ui/core/Typography';\n\nconst styles = theme => ({\n  container: {\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2),\n    overflow: 'hidden'\n  }\n});\n\nclass ContactListGroup extends Component {\n  render() {\n    const { list, title, renderItem, classes } = this.props;\n    if (!list || !list.length) {\n      return null;\n    }\n\n    const items = list.map(renderItem);\n    return (\n      <div className={classes.container}>\n        <Typography variant=\"subtitle1\" color=\"inherit\">{title}</Typography>\n        {items}\n      </div>\n    );\n  }\n}\n\nContactListGroup.defaultProps = {\n  renderItem: (c, i) => <Typography key={i} noWrap>{c.key}</Typography>\n};\n\nContactListGroup.propTypes = {\n  classes: PropTypes.object.isRequired,\n  renderItem: PropTypes.func.isRequired,\n  list: PropTypes.array,\n  title: PropTypes.string\n};\n\nexport default withStyles(styles)(ContactListGroup);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Typography from '@material-ui/core/Typography';\n\nimport { acceptContact, declineContact } from './../actions';\n\nclass ContactRequest extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: false\n    };\n\n    this.toggle = this.toggle.bind(this);\n  }\n\n  toggle() {\n    this.setState({\n      modal: !this.state.modal\n    });\n  }\n\n  render() {\n    const { publicKey } = this.props;\n\n    return (\n      <div onClick={this.toggle}>\n        <Typography noWrap>{publicKey}</Typography>\n        <Dialog\n          open={this.state.modal}\n          onClose={this.toggle}\n          aria-labelledby=\"form-dialog-title\"\n        >\n          <DialogTitle id=\"form-dialog-title\">Received contact</DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              <Typography noWrap>\n                Do you want to accept request from {publicKey}?\n              </Typography>\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.decline} color=\"default\">\n              Decline\n            </Button>\n            <Button\n              onClick={this.accept}\n              variant=\"contained\"\n              color=\"primary\">\n              Accept\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </div>\n    );\n  }\n\n  accept = () => {\n    const { publicKey, address, dispatch } = this.props;\n    dispatch(acceptContact(publicKey, address));\n    this.toggle();\n  };\n\n  decline = () => {\n    const { publicKey, address, dispatch } = this.props;\n    dispatch(declineContact(publicKey, address));\n    this.toggle();\n  };\n}\n\nContactRequest.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  publicKey: PropTypes.string.isRequired,\n  address: PropTypes.string\n};\n\nexport default compose(connect())(ContactRequest);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport sum from 'hash-sum';\nimport { push } from 'connected-react-router';\n\nimport ContactInvite from './ContactInvite';\nimport ContactListGroup from './ContactListGroup';\nimport ContactRequest from './ContactRequest';\nimport Identicon from './../../../base/components/Identicon';\nimport { groupBy } from './../../../base/fn';\n\nconst styles = theme => ({\n  grow: {\n    flexGrow: 1,\n  },\n  contact: {\n    display: 'flex',\n    color: 'inherit'\n  },\n  contactTitle: {\n    paddingLeft: theme.spacing(1),\n    lineHeight: '32px'\n  }\n});\n\nclass ContactList extends Component {\n  render() {\n    const { contacts, classes, dispatch } = this.props;\n    const map = groupBy(Object.values(contacts), 'type');\n\n    return (\n      <>\n        <Toolbar>\n          <Typography variant=\"h6\" color=\"inherit\" noWrap className={classes.grow}>\n            All\n          </Typography>\n          <ContactInvite />\n        </Toolbar>\n        <ContactListGroup list={map['sent_request']} title='Sent' />\n        <ContactListGroup\n          list={map['received_request']}\n          title='Received'\n          renderItem={(c, i) => <ContactRequest key={i} publicKey={c.key} address={c.address} />} />\n        <ContactListGroup\n          list={map['added']}\n          renderItem={(c, i) =>\n            <ButtonBase key={i}\n              className={classes.contact}\n              style={{ textDecoration: 'none' }}\n              onClick={() => { dispatch(push(`/messenger/contact/${sum(c.key)}`)) }}>\n              <div>\n                <Identicon publicKey={c.key} size={32} />\n              </div>\n              <Typography key={i} color=\"inherit\" className={classes.contactTitle} noWrap>\n                {c.username || c.key}\n              </Typography>\n            </ButtonBase>\n          }>\n        </ContactListGroup>\n      </>\n    );\n  }\n}\n\nContactList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  contacts: PropTypes.object,\n};\n\nexport default compose(\n  connect((state) => {\n    const { contacts } = state || {};\n    return { contacts };\n  }),\n  withStyles(styles)\n)(ContactList);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport ButtonBase from '@material-ui/core/ButtonBase';\nimport { push } from 'connected-react-router';\n\nimport Identicon from './../../../base/components/Identicon';\n\nconst styles = theme => ({\n  container: {\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2),\n    overflow: 'hidden'\n  },\n  chat: {\n    display: 'flex',\n    color: 'inherit',\n  },\n  chatTitle: {\n    paddingLeft: theme.spacing(1),\n    lineHeight: '32px'\n  }\n});\n\nclass ChatList extends Component {\n  render() {\n    const { chats, classes, dispatch } = this.props;\n\n    return (\n      <>\n        <Toolbar>\n          <Typography variant='h6' color='inherit' noWrap>\n            Chats\n          </Typography>\n        </Toolbar>\n        <div className={classes.container}>\n          {\n            chats.map((c, i) =>\n              <ButtonBase key={i}\n                className={classes.chat}\n                style={{ textDecoration: 'none' }}\n                onClick={() => { dispatch(push(`/messenger/chat/${c.key}`)) }}>\n                <div>\n                  <Identicon publicKey={c.key} size={32} />\n                </div>\n                <Typography key={i} color='inherit' className={classes.chatTitle} noWrap>\n                  {c.key}\n                </Typography>\n              </ButtonBase>\n            )\n          }\n        </div>\n      </>\n    );\n  }\n}\n\nChatList.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  chats: PropTypes.array,\n};\n\nexport default compose(\n  connect((state) => {\n    const { chats } = state || [];\n    return { chats };\n  }),\n  withStyles(styles)\n)(ChatList);","import React, { Component } from 'react';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { Contacts, Chat } from '@material-ui/icons';\n\nimport ContactList from './../contacts/components/ContactList';\nimport ChatList from './../chats/components/ChatList';\n\nclass ControlPanel extends Component {\n  state = {\n    value: 0,\n  };\n\n  handleChange = (_, value) => {\n    this.setState({ value });\n  };\n\n  render() {\n    return (\n      <>\n        <Tabs\n          value={this.state.value}\n          variant=\"fullWidth\"\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          onChange={this.handleChange}\n        >\n          <Tab icon={<Contacts />} label=\"Contacts\" />\n          <Tab icon={<Chat />} label=\"Chats\" />\n        </Tabs>\n        {\n          this.state.value ?\n            <ChatList /> :\n            <ContactList />\n        }\n      </>\n    );\n  }\n}\n\nexport default ControlPanel;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\n\nimport ControlPanel from './ControlPanel';\n\nconst styles = {\n  root: {\n    flexGrow: 1,\n    maxWidth: 500,\n    height: '100%'\n  },\n};\n\nfunction LeftSide({ classes }) {\n  return (\n    <Paper square className={classes.root}>\n      <ControlPanel />\n    </Paper>\n  );\n}\n\nLeftSide.propTypes = {\n  classes: PropTypes.object.isRequired\n};\n\nexport default withStyles(styles)(LeftSide);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Grid from '@material-ui/core/Grid';\n\nimport LeftSide from './LeftSide';\n\nconst styles = {\n  container: {\n    width: '100%',\n    height: '100%',\n    margin: 0,\n    padding: 0\n  },\n  cell: {\n    margin: 0,\n    padding: 0,\n    height: '100%'\n  }\n};\n\nfunction Layout({ classes, children, isNarrow }) {\n  return (\n    <Grid container spacing={0} className={classes.container}>\n      {\n        !isNarrow && <Grid item xs={3} className={classes.cell}>\n          <LeftSide />\n        </Grid>\n      }\n      <Grid item xs={isNarrow ? 12 : 9} className={classes.cell}>\n        {children}\n      </Grid>\n    </Grid>\n  );\n}\n\nLayout.propTypes = {\n  classes: PropTypes.object.isRequired,\n  children: PropTypes.node,\n  isNarrow: PropTypes.bool\n};\n\nexport default withStyles(styles)(Layout);","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport { push } from 'connected-react-router';\n\nimport Layout from './../../components/Layout';\nimport Identicon from './../../../base/components/Identicon';\nimport Key from './../../../base/components/Key';\n\nconst styles = theme => ({\n  sectionTitle: {\n    marginTop: theme.spacing(2),\n  },\n  section: {\n    borderRadius: 5,\n    marginTop: theme.spacing(2),\n    padding: theme.spacing(2)\n  },\n  actionBar: {\n    paddingTop: theme.spacing(2)\n  },\n  button: {\n    marginRight: theme.spacing(2),\n  },\n});\n\nclass Contact extends Component {\n  render() {\n    const { classes, isNarrow, contact, dispatch } = this.props;\n    if (!contact) {\n      return <div>Contact not found</div>\n    }\n\n    const { username, key, address } = contact;\n    if (!key) {\n      return <div>No data</div>\n    }\n\n    return (\n      <Layout isNarrow={isNarrow}>\n        <Grid\n          container\n          spacing={0}\n          justify='center'\n          style={{ paddingTop: 10 }}\n        >\n          <Grid item md={6} sm={8} xs={11}>\n            <Typography variant='h5' color='inherit' noWrap className={classes.sectionTitle}>\n              Contact\n            </Typography>\n            <Paper square className={classes.section}>\n              <Grid container spacing={0}>\n                <Grid item xs={3}>\n                  {key ? <Identicon publicKey={key} size={78} /> : null}\n                </Grid>\n                <Grid item xs={9}>\n                  <TextField\n                    id='username'\n                    label='User name'\n                    disabled\n                    defaultValue={username}\n                  />\n                </Grid>\n                <Grid item xs={3}></Grid>\n                <Grid item xs={9}>\n                  <Key\n                    name='publicKey'\n                    value={key}\n                    label='Public key' />\n                </Grid>\n                <Grid item xs={3}></Grid>\n                <Grid item xs={9}>\n                  <Key\n                    name='address'\n                    value={address}\n                    label='Address' />\n                </Grid>\n              </Grid>\n            </Paper>\n            <div className={classes.actionBar}>\n              <Button\n                variant='contained'\n                color='primary'\n                className={classes.button}\n                onClick={() => { dispatch(push(`/messenger/chat/${key}`)) }}>\n                Chat\n              </Button>\n            </div>\n          </Grid>\n        </Grid>\n      </Layout>\n    );\n  }\n}\n\nContact.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  isNarrow: PropTypes.bool,\n  contact: PropTypes.object\n};\n\nexport default compose(\n  connect((state, props) => {\n    const { contacts } = state || {};\n    return { contact: contacts[props.match.params.key] };\n  }),\n  withStyles(styles)\n)(Contact);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nconst styles = theme => ({\n  divider: {\n    textAlign: 'center',\n    borderBottom: '1px solid #ddd',\n    lineHeight: '0.3em',\n    margin: '10px 0 20px'\n  },\n  title: {\n    background: theme.palette.background.default,\n    padding: '0 6px',\n    color: '#bbb',\n    fontSize: '12px'\n  }\n});\n\nconst ChatDayDivider = ({ classes, date }) => {\n  return (\n    <div className={classes.divider}>\n      <span className={classes.title}>\n        {date.toLocaleDateString()}\n        </span>\n    </div>\n  );\n}\n\nChatDayDivider.propTypes = {\n  classes: PropTypes.object.isRequired,\n  date: PropTypes.instanceOf(Date).isRequired,\n}\n\nexport default withStyles(styles)(ChatDayDivider);","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport Identicon from './../../../base/components/Identicon';\nimport { download } from './../actions';\n\nconst styles = theme => ({\n  file: {\n    backgroundColor: '#f1f1f4',\n    display: 'inline-block',\n    padding: 10,\n    borderRadius: 6\n  },\n  fileName: {\n    paddingTop: theme.spacing(1)\n  },\n  divider: {\n    marginTop: theme.spacing(1),\n    marginBottom: theme.spacing(1),\n  },\n  actionBar: {\n    textAlign: 'center',\n    paddingBottom: theme.spacing(1)\n  },\n  block: {\n    textAlign: 'left',\n    paddingTop: 2\n  },\n  owned: {\n    textAlign: 'right',\n    paddingRight: 10\n  },\n  layout: {\n    display: 'flex'\n  },\n  content: {\n    paddingLeft: theme.spacing(1)\n  },\n  header: {\n    fontSize: 12,\n    color: '#bbb'\n  },\n  body: {\n    backgroundColor: '#f2f6f9',\n    display: 'inline-block',\n    padding: '2px 10px',\n    marginRight: 10,\n    borderRadius: 6,\n    textAlign: 'left'\n  },\n  ownedBody: {\n    backgroundColor: '#dbf4fd',\n    marginRight: 0,\n    marginLeft: 40\n  }\n});\n\nclass ChatMessage extends Component {\n  renderMessageContent() {\n    const { classes, message, isOwn } = this.props;\n    const { text } = message;\n\n    switch (text.startsWith('bzz:/')) {\n      case true:\n        return (\n          <div className={classes.file}>\n            <div className={classes.fileName}>File: {text.substr(5, 15)}...</div>\n            <hr className={classes.divider} />\n            <div className={classes.actionBar}>\n              <Button onClick={() => this.download(text.substr(5))}>\n                Download\n              </Button>\n            </div>\n          </div>\n        );\n      default:\n        return (\n          <div className={`${classes.body} ${isOwn ? classes.ownedBody : null}`}>\n            {message.text}\n          </div>\n        );\n    }\n  }\n\n  renderMessage() {\n    const { classes, message, sender, isOwn, showHeader } = this.props;\n    const time = new Date(message.timestamp);\n    let header;\n\n    switch (isOwn) {\n      case true:\n        if (showHeader) {\n          header = (\n            <div className={classes.header}>\n              {time.toLocaleTimeString()}\n            </div>\n          );\n        }\n        return (\n          <Fragment>\n            {header}\n            {this.renderMessageContent()}\n          </Fragment>\n        );\n      default:\n        let identicon = (<div style={{ width: 32 }}></div>);\n        const { key, username } = sender;\n        if (showHeader) {\n          identicon = (\n            <div>\n              <Identicon publicKey={key} size={32} />\n            </div>\n          );\n          header = (\n            <div className={classes.header}>\n              {username || `${key.substr(0, 8)}...`}, {time.toLocaleTimeString()}\n            </div>\n          );\n        }\n        return (\n          <div className={classes.layout}>\n            {identicon}\n            <div className={classes.content}>\n              {header}\n              {this.renderMessageContent()}\n            </div>\n          </div>\n        );\n    }\n  }\n\n  render() {\n    const { classes, isOwn } = this.props;\n\n    return (\n      <div className={`${classes.block} ${isOwn ? classes.owned : null}`}>\n        {this.renderMessage()}\n      </div>\n    );\n  }\n\n  download = (hash) => {\n    if (!hash) {\n      return;\n    }\n\n    this.props.dispatch(download(hash));\n  }\n}\n\nChatMessage.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  message: PropTypes.object.isRequired,\n  sender: PropTypes.object.isRequired,\n  isOwn: PropTypes.bool.isRequired,\n  showHeader: PropTypes.bool.isRequired,\n};\n\nexport default compose(\n  connect(),\n  withStyles(styles)\n)(ChatMessage);","import React, { Component, Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { Element, scroller } from 'react-scroll';\nimport { withStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport InputBase from '@material-ui/core/InputBase';\nimport Divider from '@material-ui/core/Divider';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Description, Send } from '@material-ui/icons';\nimport sum from 'hash-sum';\n\nimport Layout from './../../components/Layout';\nimport ChatDayDivider from './../components/ChatDayDivider';\nimport ChatMessage from './../components/ChatMessage';\nimport { sendMessage, sendFile } from './../actions';\n\nconst styles = theme => ({\n  scrollContainer: {\n    height: '100%',\n    overflow: 'scroll'\n  },\n  list: {\n    paddingBottom: 80\n  },\n  root: {\n    marginTop: theme.spacing(4),\n    marginBottom: theme.spacing(4),\n    marginRight: theme.spacing(2),\n    padding: '2px 4px',\n    display: 'flex'\n  },\n  input: {\n    marginLeft: 8,\n    flex: 1,\n  },\n  file: {\n    width: 0.1,\n    height: 0.1,\n    opacity: 0,\n    overflow: 'hidden',\n    position: 'absolute',\n    zIndex: '-1',\n    cursor: 'pointer',\n  },\n  fileLabel: {\n    margin: 0,\n  },\n  iconButton: {\n    padding: 10,\n  },\n  divider: {\n    width: 1,\n    height: 28,\n    marginTop: 8,\n    marginBottom: 8,\n    marginLeft: 4,\n    marginRight: 4,\n  },\n  fixed: {\n    position: 'fixed',\n    left: 0,\n    right: 0,\n    bottom: 0,\n  }\n});\n\nclass Chat extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = { msg: '' };\n\n    this.onChange = this.onChange.bind(this);\n    this.onKeyPress = this.onKeyPress.bind(this);\n  }\n\n  componentDidMount() {\n    this.scrollToBottom();\n  }\n\n  componentDidUpdate() {\n    this.scrollToBottom();\n  }\n\n  scrollToBottom() {\n    scroller.scrollTo('bottom', {\n      duration: 400,\n      delay: 0,\n      smooth: 'easeInOutQuart',\n      containerId: 'scroll-container'\n    });\n  }\n\n  onChange(e) {\n    this.setState({\n      msg: e.target.value\n    });\n  }\n\n  onKeyPress(e) {\n    if (e.key === 'Enter' && this.state.msg) {\n      this.send();\n    }\n  }\n\n  isSameDay(curTime, prevTime) {\n    return curTime.getDay() === prevTime.getDay();\n  }\n\n  showMsgHeader(index, curMsg, prevMsg) {\n    if (index === 0) {\n      return true;\n    }\n\n    if (curMsg.sender !== prevMsg.sender) {\n      return true;\n    }\n\n    return false;\n  }\n\n  getParticipants() {\n    const { chat, account, contacts } = this.props;\n    const { publicKey } = account;\n\n    const participants = {\n      [sum(publicKey)]: { key: publicKey }\n    };\n\n    Object.keys(chat.participants)\n      .forEach(k => {\n        const contact = contacts[k];\n        if (!contact) {\n          return;\n        }\n        participants[k] = contacts[k];\n      });\n\n    return participants;\n  }\n\n  render() {\n    const { classes, isNarrow, chat, account } = this.props;\n    if (!chat) {\n      return <div>Chat not found</div>\n    }\n\n    const participants = this.getParticipants();\n    const messages = Object.values(chat.messages)\n      .sort((a, b) => a.timestamp - b.timestamp);\n    const { publicKey } = account;\n\n    return (\n      <>\n        <Layout isNarrow={isNarrow}>\n          <Element id='scroll-container' className={classes.scrollContainer}>\n            <Grid\n              container\n              spacing={0}\n              justify='center'\n            >\n              <Grid item xs={10} lg={10} xl={8} className={classes.list}>\n                {\n                  messages\n                    .map((m, i) => {\n                      const sender = participants[m.sender];\n                      const date = new Date(m.timestamp);\n                      const showDayDivider = i === 0 || !this.isSameDay(date, new Date(messages[i - 1].timestamp));\n                      return (\n                        <Fragment key={i}>\n                          {showDayDivider ? <ChatDayDivider date={date} /> : null}\n                          <div>\n                            <ChatMessage\n                              message={m}\n                              sender={sender}\n                              isOwn={sender.key === publicKey}\n                              showHeader={this.showMsgHeader(i, m, i > 0 ? messages[i - 1] : null) || showDayDivider} />\n                          </div>\n                        </Fragment>\n                      )\n                    })\n                }\n                <Element name='bottom'></Element>\n              </Grid>\n            </Grid>\n          </Element>\n        </Layout>\n        <div className={classes.fixed}>\n          <Grid container spacing={0}>\n            {\n              !isNarrow && <Grid item sm={3}></Grid>\n            }\n            <Grid item xs={isNarrow ? 12 : 9}>\n              <Grid\n                container\n                spacing={0}\n                justify='center'\n              >\n                <Grid item xs={10} lg={10} xl={8}>\n                  <Paper className={classes.root} elevation={1}>\n                    <InputBase\n                      className={classes.input}\n                      placeholder='Type a message here'\n                      value={this.state.msg}\n                      onChange={this.onChange}\n                      onKeyPress={this.onKeyPress}\n                      autoFocus />\n                    <input\n                      type='file'\n                      name='file'\n                      id='file'\n                      className={classes.file}\n                      onChange={this.upload}\n                    />\n                    <label htmlFor='file' className={classes.fileLabel}>\n                      <IconButton className={classes.iconButton} component='span'>\n                        <Description />\n                      </IconButton>\n                    </label>\n                    <Divider className={classes.divider} />\n                    <IconButton\n                      className={classes.iconButton}\n                      onClick={this.send}\n                      disabled={!this.state.msg}>\n                      <Send />\n                    </IconButton>\n                  </Paper>\n                </Grid>\n              </Grid>\n            </Grid>\n          </Grid>\n        </div>\n      </>\n    );\n  }\n\n  send = () => {\n    const { id } = this.props;\n    this.props.dispatch(sendMessage(id, this.state.msg));\n    this.setState({ msg: '' });\n  };\n\n  upload = (e) => {\n    if (!e.target.files.length) {\n      return;\n    }\n\n    const { id } = this.props;\n    this.props.dispatch(sendFile(id, e.target.files[0]));\n  }\n}\n\nChat.propTypes = {\n  classes: PropTypes.object.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  isNarrow: PropTypes.bool,\n  id: PropTypes.string,\n  chat: PropTypes.object,\n  account: PropTypes.object,\n};\n\nexport default compose(\n  connect((state, props) => {\n    const { chats, account, contacts } = state || {\n      chats: [],\n      account: {},\n      contacts: {}\n    };\n    const key = props.match.params.key;\n    return {\n      id: key,\n      chat: chats.find(c => c.key === key),\n      account,\n      contacts\n    };\n  }),\n  withStyles(styles)\n)(Chat);","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\n\nimport { connect as connectApp } from '../../app/actions';\n\nclass Startup extends React.Component {\n  static propTypes = {\n    dispatch: PropTypes.func.isRequired,\n    children: PropTypes.node\n  };\n\n  componentDidMount() {\n    const { dispatch } = this.props;\n    dispatch(connectApp());\n  }\n\n  render() {\n    return (\n      <>\n        {this.props.children}\n      </>\n    );\n  }\n}\n\nexport default connect()(Startup)","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { Switch, Route } from 'react-router';\nimport Helmet from 'react-helmet-async';\nimport { useTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\n\nimport Layout from './base/containers/Layout';\nimport Home from './base/pages/Home';\nimport Settings from './settings/pages/Settings';\nimport Profile from './account/pages/Profile';\nimport Messenger from './messenger';\nimport Contact from './messenger/contacts/pages/Contact';\nimport Chat from './messenger/chats/pages/Chat';\nimport ControlPanel from './messenger/components/ControlPanel';\n\nimport Startup from './base/containers/Startup';\nimport './App.css';\n\nfunction App({ settings }) {\n  const theme = useTheme();\n  const isNarrow = !useMediaQuery(theme.breakpoints.up('md')) || settings.mode === 'narrow';\n\n  return (\n    <Startup>\n      <Helmet titleTemplate='Nebula - %s' />\n      <Layout isNarrow={isNarrow}>\n        <Switch>\n          <Route exact path={settings.home} component={Home} />\n          <Route exact path='/settings' component={Settings} />\n          <Route exact path='/profile' component={Profile} />\n          <Route exact path='/messenger' render={(props) => (<Messenger {...props} isNarrow={isNarrow} />)} />\n          <Route exact path='/messenger/contact/:key' render={(props) => (<Contact {...props} isNarrow={isNarrow} />)} />\n          <Route exact path='/messenger/chat/:key' render={(props) => (<Chat {...props} isNarrow={isNarrow} />)} />\n          <Route exact path='/messenger/control' render={(props) => (<ControlPanel {...props} isNarrow={isNarrow} />)} />\n        </Switch>\n      </Layout>\n    </Startup>\n  );\n}\n\nApp.propTypes = {\n  settings: PropTypes.object.isRequired,\n};\n\nexport default compose(\n  connect((state) => {\n    const { settings } = state || {\n      settings: {\n        mode: 'full',\n        home: '/'\n      }\n    };\n    return { settings };\n  })\n)(App);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { AppContainer } from 'react-hot-loader';\nimport { HelmetProvider } from 'react-helmet-async';\nimport { Provider } from 'react-redux';\nimport { ConnectedRouter } from 'connected-react-router';\n\nimport './index.css';\nimport { configureStore, history } from './base/redux';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { run as apiRun } from './api';\n\nconst urlParams = new URLSearchParams(window.location.search);\n\nconst store = configureStore({\n  settings: {\n    mode: (urlParams.get('narrow') || '').toLowerCase() === 'true' ? 'narrow' : 'full',\n    home: urlParams.get('home') || '/'\n  }\n});\n\nReactDOM.render(\n  <AppContainer>\n    <HelmetProvider>\n      <Provider store={store}>\n        <ConnectedRouter history={history}>\n          <App />\n        </ConnectedRouter>\n      </Provider>\n    </HelmetProvider>\n  </AppContainer>,\n  document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\n// Start APIs\napiRun(store);","const PUBLIC_KEY_RE = /^0x[0-9a-f]{130}$/\n\nexport default {\n  isValidPubKey(key, account, existing) {\n    if (key === account) {\n      throw new Error('Invalid contact key: this is your own key');\n    }\n\n    if (!PUBLIC_KEY_RE.test(key)) {\n      throw new Error('Invalid contact key: must be an hexadecimal string prefixed with \"0x\"');\n    }\n\n    if (existing) {\n      throw new Error('The contact already present in your list of contacts');\n    }\n\n    return true;\n  }\n}","import { hexValueType } from '@erebos/swarm-browser';\nimport { map, filter } from 'rxjs/operators';\nimport sum from 'hash-sum';\n\nimport keyUtils from './../../base/key';\nimport { createChat } from './../chats/actions';\nimport { getAddress } from './../../base/fn';\n\nexport const CONTACTS_RESTORE = 'CONTACTS_RESTORE';\nexport const CONTACT_SUBSCRIBE = 'CONTACT_SUBSCRIBE';\nexport const CONTACT_REQUEST = 'CONTACT_REQUEST';\nexport const CONTACT_RECEIVE = 'CONTACT_RECEIVE';\nexport const CONTACT_MUTATE = 'CONTACT_MUTATE';\nexport const CONTACT_ACCEPT = 'CONTACT_ACCEPT';\nexport const CONTACT_DECLINE = 'CONTACT_DECLINE';\n\nfunction decodePssEvent(data) {\n  return {\n    key: data.key,\n    data: data.msg.toObject(),\n  }\n}\n\nasync function createSubscription(client, publicKey) {\n  const topic = await client.pss.stringToTopic(publicKey);\n  const subscription = await client.pss.createTopicSubscription(topic);\n  return subscription.pipe(\n    map(decodePssEvent),\n    filter((event) => {\n      return (\n        (event.data.type === 'contact_request' &&\n          event.data.payload != null &&\n          event.data.payload.topic != null) ||\n        event.data.type === 'contact_response'\n      )\n    }),\n    map(\n      (event) => ({\n        key: event.key,\n        type: event.data.type,\n        payload: event.data.payload,\n      }),\n    ),\n  )\n}\n\nfunction handler(dispatch, getState) {\n  return async (event) => {\n    const { contacts } = getState();\n    const hash = sum(event.key);\n    const existing = contacts[hash];\n\n    if (\n      event.type === 'contact_request' &&\n      (existing == null || existing.type === 'received_request')\n    ) {\n      // New contact or update existing with new payload\n      const contact = {\n        key: event.key,\n        type: 'received_request',\n        topic: event.payload.topic,\n        username: event.payload.username,\n        address: event.payload.overlay_address,\n      };\n\n      dispatch({ type: CONTACT_RECEIVE, contacts: { [hash]: contact } });\n    } else if (\n      event.type === 'contact_response' &&\n      existing != null &&\n      (existing.type === 'sent_declined' ||\n        existing.type === 'sent_request')\n    ) {\n      // Response from contact, set type to 'added' or 'sent_declined' accordingly\n      const contact = {\n        ...existing,\n        type: event.payload.contact === true ? 'added' : 'sent_declined',\n        username: event.payload.username,\n        address: event.payload.overlay_address,\n      }\n\n      dispatch({ type: CONTACT_MUTATE, contacts: { [hash]: contact } });\n      if (event.payload.contact) {\n        dispatch(createChat(contact));\n      }\n    } else {\n      console.error('unhandled event', event);\n      return;\n    }\n  }\n}\n\nexport function subscribe() {\n  return async (dispatch, getState, resolve) => {\n    const { account } = getState();\n    const { client } = resolve();\n    const subscription = await createSubscription(client, account.publicKey);\n    const sub = subscription.subscribe(handler(dispatch, getState));\n    dispatch({ type: CONTACT_SUBSCRIBE, sub });\n  }\n}\n\nexport function restoreContacts(publicKey) {\n  return async (dispatch, getState) => {\n    const { app } = getState();\n    const session = app[publicKey] || {};\n    const contacts = session.contacts || {};\n    dispatch({ type: CONTACTS_RESTORE, contacts });\n    dispatch(subscribe());\n  };\n}\n\nfunction createRandomString() {\n  return Math.random()\n    .toString(36)\n    .slice(2);\n}\n\nexport function inviteContact(publicKey, address) {\n  return async (dispatch, getState, resolve) => {\n    const { account, contacts, settings } = getState();\n    const publicKeyHex = hexValueType(publicKey);\n    const hash = sum(publicKeyHex);\n\n    keyUtils.isValidPubKey(publicKeyHex, account.publicKey, contacts[hash]);\n\n    const { client } = resolve();\n    const [contactTopic, sharedTopic] = await Promise.all([\n      client.pss.stringToTopic(publicKeyHex),\n      client.pss.stringToTopic(createRandomString()),\n    ]);\n\n    await client.pss.setPeerPublicKey(publicKeyHex, contactTopic, address || '0x');\n    const pssMessage = {\n      type: 'contact_request',\n      payload: {\n        username: account.username,\n        message: null,\n        topic: sharedTopic,\n        overlay_address: getAddress(account.overlayAddress, settings.revealAddress),\n      },\n      utc_timestamp: Date.now()\n    };\n    await client.pss.sendAsym(publicKeyHex, contactTopic, pssMessage);\n\n    const contact = {\n      key: publicKeyHex,\n      topic: sharedTopic,\n      type: 'sent_request'\n    };\n\n    dispatch({ type: CONTACT_REQUEST, contacts: { [hash]: contact } });\n  };\n}\n\nasync function sendResponse(client, getState, publicKey, address, accept) {\n  const topic = await client.pss.stringToTopic(publicKey);\n  let payload = { contact: accept };\n\n  if (accept) {\n    const { account, settings } = getState();\n    payload = {\n      ...payload,\n      username: account.username,\n      overlay_address: getAddress(account.overlayAddress, settings.revealAddress),\n    };\n\n    await client.pss.setPeerPublicKey(publicKey, topic, address || '0x');\n  }\n\n  const message = {\n    type: 'contact_response',\n    payload,\n    utc_timestamp: Date.now()\n  };\n  await client.pss.sendAsym(publicKey, topic, message);\n}\n\nexport function acceptContact(publicKey, address) {\n  return async (dispatch, getState, resolve) => {\n    const { contacts } = getState();\n    const { client } = resolve();\n    await sendResponse(client, getState, publicKey, address, true);\n\n    const hash = sum(publicKey);\n    const contact = {\n      ...contacts[hash],\n      type: 'added'\n    };\n\n    dispatch({ type: CONTACT_ACCEPT, contacts: { [hash]: contact } });\n    dispatch(createChat(contact));\n  }\n}\n\nexport function declineContact(publicKey, address) {\n  return async (dispatch, getState, resolve) => {\n    const { contacts } = getState();\n    const { client } = resolve();\n    await sendResponse(client, getState, publicKey, address, false);\n\n    const hash = sum(publicKey);\n    const contact = {\n      ...contacts[hash],\n      type: 'received_declined'\n    };\n\n    dispatch({ type: CONTACT_DECLINE, contacts: { [hash]: contact } });\n  }\n}","import { map, filter } from 'rxjs/operators';\nimport sum from 'hash-sum';\nimport FileSaver from 'file-saver';\n\nimport { readFile } from './../../base/fn';\n\nexport const CHATS_RESTORE = 'CHATS_RESTORE';\nexport const CHAT_CREATE = 'CHAT_CREATE';\nexport const CHAT_SUBSCRIBE = 'CHAT_SUBSCRIBE';\nexport const CHAT_SEND_MESSAGE = 'CHAT_SEND_MESSAGE';\nexport const CHAT_RECEIVE_MESSAGE = 'CHAT_RECEIVE_MESSAGE';\n\nfunction decodePssEvent(data) {\n  return {\n    key: data.key,\n    data: data.msg.toObject(),\n  }\n}\n\nfunction getChat(key, chats) {\n  const chat = chats.find(c => c.key === key);\n  if (!chat) {\n    throw new Error('Chat is not found');\n  }\n  return chat;\n}\n\nasync function createSubscription(client, chat) {\n  const [sub] = await Promise.all([\n    client.pss.createTopicSubscription(chat.topic),\n    client.pss.setPeerPublicKey(chat.key, chat.topic, chat.address),\n  ])\n  return sub.pipe(\n    map(decodePssEvent),\n    filter((event) => {\n      return event.data.type === 'chat_message' &&\n        event.data.payload != null\n    }),\n    map(\n      (event) => ({\n        key: event.key,\n        type: event.data.type,\n        utc_timestamp: event.data.utc_timestamp,\n        payload: event.data.payload,\n      }),\n    ),\n  )\n}\n\nfunction handler(dispatch, getState) {\n  return async (event) => {\n    const { chats } = getState();\n    const chat = getChat(event.key, chats);\n\n    const message = {\n      sender: sum(event.key),\n      isRead: false,\n      text: event.payload.text,\n      timestamp: event.utc_timestamp,\n    }\n\n    const existing = chat.messages[sum(message)];\n    if (existing) {\n      return;\n    }\n\n    dispatch({ type: CHAT_RECEIVE_MESSAGE, key: chat.key, message });\n  }\n}\n\nfunction subscribe(chat) {\n  return async (dispatch, getState, resolve) => {\n    const { client } = resolve();\n    const subscription = await createSubscription(client, chat);\n    const sub = subscription.subscribe(handler(dispatch, getState));\n    dispatch({ type: CHAT_SUBSCRIBE, sub });\n  }\n}\n\nfunction subscribeAll(dispatch, chats) {\n  chats.map(chat => dispatch(subscribe(chat)));\n}\n\nexport function restoreChats(publicKey) {\n  return async (dispatch, getState) => {\n    const { app } = getState();\n    const session = app[publicKey] || {};\n    const chats = session.chats || [];\n    dispatch({ type: CHATS_RESTORE, chats });\n    subscribeAll(dispatch, chats);\n  };\n}\n\nexport function createChat(contact) {\n  return async (dispatch, getState) => {\n    const { account } = getState();\n    const chat = {\n      key: contact.key,\n      topic: contact.topic,\n      address: contact.address,\n      participants: {\n        [sum(contact.key)]: contact.key,\n        [sum(account.publicKey)]: account.publicKey,\n      },\n      messages: {}\n    }\n\n    dispatch({ type: CHAT_CREATE, chat });\n    dispatch(subscribe(chat));\n  };\n}\n\nasync function send(dispatch, client, chat, publicKey, text) {\n  const pssMessage = {\n    type: 'chat_message',\n    payload: { text },\n    utc_timestamp: Date.now()\n  };\n  await client.pss.sendAsym(chat.key, chat.topic, pssMessage);\n\n  const message = {\n    sender: sum(publicKey),\n    isRead: true,\n    timestamp: Date.now(),\n    text\n  }\n\n  dispatch({ type: CHAT_SEND_MESSAGE, key: chat.key, message });\n}\n\nexport function sendMessage(key, text) {\n  return async (dispatch, getState, resolve) => {\n    const { account, chats } = getState();\n    const chat = getChat(key, chats);\n    const { client } = resolve();\n    send(dispatch, client, chat, account.publicKey, text);\n  };\n}\n\nexport function sendFile(key, file) {\n  return async (dispatch, getState, resolve) => {\n    const { account, chats } = getState();\n    const chat = getChat(key, chats);\n\n    const { client } = resolve();\n    const { bzz } = client;\n    const readEvent = await readFile(file);\n    const buffer = readEvent.currentTarget.result\n    const hash = await bzz.uploadFile(buffer, { contentType: file.type });\n\n    const text = `bzz:/${hash}`;\n    send(dispatch, client, chat, account.publicKey, text);\n  };\n}\n\nexport function download(hash) {\n  return async (_, __, resolve) => {\n    const { client } = resolve();\n    const { bzz } = client;\n    const file = await bzz.download(hash);\n    await FileSaver.saveAs(await file.blob());\n  }\n}\n","export const groupBy = (xs, key) => {\n  return xs.reduce(function (rv, x) {\n    (rv[x[key]] = rv[x[key]] || []).push(x);\n    return rv;\n  }, {});\n};\n\nexport const readFile = (file) => {\n  return new Promise((resolve, _) => {\n    const fr = new FileReader();\n    fr.onload = resolve;\n    fr.readAsArrayBuffer(file);\n  });\n};\n\nexport const getAddress = (address = '', reveal = 0) => {\n  return address.substring(0, 2 + reveal * 2) || '0x';\n}"],"sourceRoot":""}